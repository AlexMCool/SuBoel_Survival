##############################################################################
#                             name change check                              #
##############################################################################
name_change_check:
  command: /name_change_check
  execute_mode: FROM_ANOTHER_COMMAND
  permission-required: false
  register: true
  type: RUN_AS_OPERATOR
  runcmd:
  # arg1 = $uuid
  
  # check if players' playerdata name is different then players' name
  - '$Script$%if%$PlayerData%$s.name%!=$player'
  
  # reset score (delay because of playerevent happening before join message)
  - '$delay$<1>/minecraft:scoreboard players reset $player ssCoins'

  - '/minecraft:scoreboard players reset $player saCooldown'
  
  - '/minecraft:scoreboard players reset $player sadChangeProduct'
  - '/minecraft:scoreboard players reset $player sadColored'
  - '/minecraft:scoreboard players reset $player sadElevator'
  - '/minecraft:scoreboard players reset $player sadGarage'
  - '/minecraft:scoreboard players reset $player sadLightsBottom'
  - '/minecraft:scoreboard players reset $player sadLightsTop'
  - '/minecraft:scoreboard players reset $player sadLightsSmall'
  - '/minecraft:scoreboard players reset $player sadNoMining'
  - '/minecraft:scoreboard players reset $player sadRedstone'
  
  - '/minecraft:scoreboard players reset $player sstAnimalsBred'
  - '/minecraft:scoreboard players reset $player sstArmorCleaned'
  - '/minecraft:scoreboard players reset $player sstBannersCleaned'
  - '/minecraft:scoreboard players reset $player sstCakeEaten'
  - '/minecraft:scoreboard players reset $player sstCaulFilled'
  - '/minecraft:scoreboard players reset $player sstChests'
  - '/minecraft:scoreboard players reset $player sstDamageDealt'
  - '/minecraft:scoreboard players reset $player sstDamageTaken'
  - '/minecraft:scoreboard players reset $player sstDeathCount'
  - '/minecraft:scoreboard players reset $player sstDiBoat'
  - '/minecraft:scoreboard players reset $player sstDiClimbed'
  - '/minecraft:scoreboard players reset $player sstDiCrouched'
  - '/minecraft:scoreboard players reset $player sstDiDove'
  - '/minecraft:scoreboard players reset $player sstDiElytra'
  - '/minecraft:scoreboard players reset $player sstDiFallen'
  - '/minecraft:scoreboard players reset $player sstDiFlown'
  - '/minecraft:scoreboard players reset $player sstDiHorse'
  - '/minecraft:scoreboard players reset $player sstDiMinecart'
  - '/minecraft:scoreboard players reset $player sstDiPig'
  - '/minecraft:scoreboard players reset $player sstDiSprinted'
  - '/minecraft:scoreboard players reset $player sstDiSwum'
  - '/minecraft:scoreboard players reset $player sstDiWalked'
  - '/minecraft:scoreboard players reset $player sstDispensers'
  - '/minecraft:scoreboard players reset $player sstDroppers'
  - '/minecraft:scoreboard players reset $player sstEnderChests'
  - '/minecraft:scoreboard players reset $player sstFishCaught'
  - '/minecraft:scoreboard players reset $player sstGamesQuit'
  - '/minecraft:scoreboard players reset $player sstHoppers'
  - '/minecraft:scoreboard players reset $player sstIntBeacon'
  - '/minecraft:scoreboard players reset $player sstIntBrewStand'
  - '/minecraft:scoreboard players reset $player sstIntCraft'
  - '/minecraft:scoreboard players reset $player sstIntFurnace'
  - '/minecraft:scoreboard players reset $player sstItemsDropped'
  - '/minecraft:scoreboard players reset $player sstItemsEnchanted'
  - '/minecraft:scoreboard players reset $player sstJumps'
  - '/minecraft:scoreboard players reset $player sstJunkFished'
  - '/minecraft:scoreboard players reset $player sstLevel'
  - '/minecraft:scoreboard players reset $player sstMinutesPlayed'
  - '/minecraft:scoreboard players reset $player sstMobKills'
  - '/minecraft:scoreboard players reset $player sstNoteblocksPlay'
  - '/minecraft:scoreboard players reset $player sstNoteblocksTune'
  - '/minecraft:scoreboard players reset $player sstNumberDeaths'
  - '/minecraft:scoreboard players reset $player sstPlantsPotted'
  - '/minecraft:scoreboard players reset $player sstPlayerKill'
  - '/minecraft:scoreboard players reset $player sstPlayerKills'
  - '/minecraft:scoreboard players reset $player sstRecordsPlayed'
  - '/minecraft:scoreboard players reset $player sstSinceLastDeath'
  - '/minecraft:scoreboard players reset $player sstSneakTime'
  - '/minecraft:scoreboard players reset $player sstTalkedVill'
  - '/minecraft:scoreboard players reset $player sstTimesSlept'
  - '/minecraft:scoreboard players reset $player sstTotalKills'
  - '/minecraft:scoreboard players reset $player sstTradedVill'
  - '/minecraft:scoreboard players reset $player sstTrappedChest'
  - '/minecraft:scoreboard players reset $player sstTreasureFished'
  - '/minecraft:scoreboard players reset $player sstWaterFromCaul'
  - '/minecraft:scoreboard players reset $player sstXP'
  
  # operation
  - '/minecraft:scoreboard players operation $player ssCoins = $PlayerData%$s.name% ssCoins'

  - '/minecraft:scoreboard players operation $player saCooldown = $PlayerData%$s.name% saCooldown'
  
  - '/minecraft:scoreboard players operation $player sadChangeProduct = $PlayerData%$s.name% sadChangeProduct'
  - '/minecraft:scoreboard players operation $player sadColored = $PlayerData%$s.name% sadColored'
  - '/minecraft:scoreboard players operation $player sadElevator = $PlayerData%$s.name% sadElevator'
  - '/minecraft:scoreboard players operation $player sadGarage = $PlayerData%$s.name% sadGarage'
  - '/minecraft:scoreboard players operation $player sadLightsBottom = $PlayerData%$s.name% sadLightsBottom'
  - '/minecraft:scoreboard players operation $player sadLightsTop = $PlayerData%$s.name% sadLightsTop'
  - '/minecraft:scoreboard players operation $player sadLightsSmall = $PlayerData%$s.name% sadLightsSmall'
  - '/minecraft:scoreboard players operation $player sadNoMining = $PlayerData%$s.name% sadNoMining'
  - '/minecraft:scoreboard players operation $player sadRedstone = $PlayerData%$s.name% sadRedstone'
  
  - '/minecraft:scoreboard players operation $player sstAnimalsBred = $PlayerData%$s.name% sstAnimalsBred'
  - '/minecraft:scoreboard players operation $player sstArmorCleaned = $PlayerData%$s.name% sstArmorCleaned'
  - '/minecraft:scoreboard players operation $player sstBannersCleaned = $PlayerData%$s.name% sstBannersCleaned'
  - '/minecraft:scoreboard players operation $player sstCakeEaten = $PlayerData%$s.name% sstCakeEaten'
  - '/minecraft:scoreboard players operation $player sstCaulFilled = $PlayerData%$s.name% sstCaulFilled'
  - '/minecraft:scoreboard players operation $player sstChests = $PlayerData%$s.name% sstChests'
  - '/minecraft:scoreboard players operation $player sstDamageDealt = $PlayerData%$s.name% sstDamageDealt'
  - '/minecraft:scoreboard players operation $player sstDamageTaken = $PlayerData%$s.name% sstDamageTaken'
  - '/minecraft:scoreboard players operation $player sstDeathCount = $PlayerData%$s.name% sstDeathCount'
  - '/minecraft:scoreboard players operation $player sstDiBoat = $PlayerData%$s.name% sstDiBoat'
  - '/minecraft:scoreboard players operation $player sstDiClimbed = $PlayerData%$s.name% sstDiClimbed'
  - '/minecraft:scoreboard players operation $player sstDiCrouched = $PlayerData%$s.name% sstDiCrouched'
  - '/minecraft:scoreboard players operation $player sstDiDove = $PlayerData%$s.name% sstDiDove'
  - '/minecraft:scoreboard players operation $player sstDiElytra = $PlayerData%$s.name% sstDiElytra'
  - '/minecraft:scoreboard players operation $player sstDiFallen = $PlayerData%$s.name% sstDiFallen'
  - '/minecraft:scoreboard players operation $player sstDiFlown = $PlayerData%$s.name% sstDiFlown'
  - '/minecraft:scoreboard players operation $player sstDiHorse = $PlayerData%$s.name% sstDiHorse'
  - '/minecraft:scoreboard players operation $player sstDiMinecart = $PlayerData%$s.name% sstDiMinecart'
  - '/minecraft:scoreboard players operation $player sstDiPig = $PlayerData%$s.name% sstDiPig'
  - '/minecraft:scoreboard players operation $player sstDiSprinted = $PlayerData%$s.name% sstDiSprinted'
  - '/minecraft:scoreboard players operation $player sstDiSwum = $PlayerData%$s.name% sstDiSwum'
  - '/minecraft:scoreboard players operation $player sstDiWalked = $PlayerData%$s.name% sstDiWalked'
  - '/minecraft:scoreboard players operation $player sstDispensers = $PlayerData%$s.name% sstDispensers'
  - '/minecraft:scoreboard players operation $player sstDroppers = $PlayerData%$s.name% sstDroppers'
  - '/minecraft:scoreboard players operation $player sstEnderChests = $PlayerData%$s.name% sstEnderChests'
  - '/minecraft:scoreboard players operation $player sstFishCaught = $PlayerData%$s.name% sstFishCaught'
  - '/minecraft:scoreboard players operation $player sstGamesQuit = $PlayerData%$s.name% sstGamesQuit'
  - '/minecraft:scoreboard players operation $player sstHoppers = $PlayerData%$s.name% sstHoppers'
  - '/minecraft:scoreboard players operation $player sstIntBeacon = $PlayerData%$s.name% sstIntBeacon'
  - '/minecraft:scoreboard players operation $player sstIntBrewStand = $PlayerData%$s.name% sstIntBrewStand'
  - '/minecraft:scoreboard players operation $player sstIntCraft = $PlayerData%$s.name% sstIntCraft'
  - '/minecraft:scoreboard players operation $player sstIntFurnace = $PlayerData%$s.name% sstIntFurnace'
  - '/minecraft:scoreboard players operation $player sstItemsDropped = $PlayerData%$s.name% sstItemsDropped'
  - '/minecraft:scoreboard players operation $player sstItemsEnchanted = $PlayerData%$s.name% sstItemsEnchanted'
  - '/minecraft:scoreboard players operation $player sstJumps = $PlayerData%$s.name% sstJumps'
  - '/minecraft:scoreboard players operation $player sstJunkFished = $PlayerData%$s.name% sstJunkFished'
  - '/minecraft:scoreboard players operation $player sstLevel = $PlayerData%$s.name% sstLevel'
  - '/minecraft:scoreboard players operation $player sstMinutesPlayed = $PlayerData%$s.name% sstMinutesPlayed'
  - '/minecraft:scoreboard players operation $player sstMobKills = $PlayerData%$s.name% sstMobKills'
  - '/minecraft:scoreboard players operation $player sstNoteblocksPlay = $PlayerData%$s.name% sstNoteblocksPlay'
  - '/minecraft:scoreboard players operation $player sstNoteblocksTune = $PlayerData%$s.name% sstNoteblocksTune'
  - '/minecraft:scoreboard players operation $player sstNumberDeaths = $PlayerData%$s.name% sstNumberDeaths'
  - '/minecraft:scoreboard players operation $player sstPlantsPotted = $PlayerData%$s.name% sstPlantsPotted'
  - '/minecraft:scoreboard players operation $player sstPlayerKill = $PlayerData%$s.name% sstPlayerKill'
  - '/minecraft:scoreboard players operation $player sstPlayerKills = $PlayerData%$s.name% sstPlayerKills'
  - '/minecraft:scoreboard players operation $player sstRecordsPlayed = $PlayerData%$s.name% sstRecordsPlayed'
  - '/minecraft:scoreboard players operation $player sstSinceLastDeath = $PlayerData%$s.name% sstSinceLastDeath'
  - '/minecraft:scoreboard players operation $player sstSneakTime = $PlayerData%$s.name% sstSneakTime'
  - '/minecraft:scoreboard players operation $player sstTalkedVill = $PlayerData%$s.name% sstTalkedVill'
  - '/minecraft:scoreboard players operation $player sstTimesSlept = $PlayerData%$s.name% sstTimesSlept'
  - '/minecraft:scoreboard players operation $player sstTotalKills = $PlayerData%$s.name% sstTotalKills'
  - '/minecraft:scoreboard players operation $player sstTradedVill = $PlayerData%$s.name% sstTradedVill'
  - '/minecraft:scoreboard players operation $player sstTrappedChest = $PlayerData%$s.name% sstTrappedChest'
  - '/minecraft:scoreboard players operation $player sstTreasureFished = $PlayerData%$s.name% sstTreasureFished'
  - '/minecraft:scoreboard players operation $player sstWaterFromCaul = $PlayerData%$s.name% sstWaterFromCaul'
  - '/minecraft:scoreboard players operation $player sstXP = $PlayerData%$s.name% sstXP'
  
  # reset old players' score
  - '/minecraft:scoreboard players reset $PlayerData%$s.name% ssCoins'

  - '/minecraft:scoreboard players reset $PlayerData%$s.name% saCooldown'
  
  - '/minecraft:scoreboard players reset $PlayerData%$s.name% sadChangeProduct'
  - '/minecraft:scoreboard players reset $PlayerData%$s.name% sadColored'
  - '/minecraft:scoreboard players reset $PlayerData%$s.name% sadElevator'
  - '/minecraft:scoreboard players reset $PlayerData%$s.name% sadGarage'
  - '/minecraft:scoreboard players reset $PlayerData%$s.name% sadLightsBottom'
  - '/minecraft:scoreboard players reset $PlayerData%$s.name% sadLightsTop'
  - '/minecraft:scoreboard players reset $PlayerData%$s.name% sadLightsSmall'
  - '/minecraft:scoreboard players reset $PlayerData%$s.name% sadNoMining'
  - '/minecraft:scoreboard players reset $PlayerData%$s.name% sadRedstone'
  
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstAnimalsBred'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstArmorCleaned'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstBannersCleaned'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstCakeEaten'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstCaulFilled'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstChests'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDamageDealt'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDamageTaken'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDeathCount'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiBoat'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiClimbed'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiCrouched'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiDove'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiElytra'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiFallen'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiFlown'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiHorse'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiMinecart'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiPig'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiSprinted'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiSwum'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDiWalked'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDispensers'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstDroppers'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstEnderChests'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstFishCaught'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstGamesQuit'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstHoppers'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstIntBeacon'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstIntBrewStand'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstIntCraft'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstIntFurnace'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstItemsDropped'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstItemsEnchanted'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstJumps'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstJunkFished'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstLevel'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstMinutesPlayed'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstMobKills'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstNoteblocksPlay'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstNoteblocksTune'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstNumberDeaths'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstPlantsPotted'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstPlayerKill'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstPlayerKills'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstRecordsPlayed'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstSinceLastDeath'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstSneakTime'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstTalkedVill'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstTimesSlept'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstTotalKills'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstTradedVill'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstTrappedChest'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstTreasureFished'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstWaterFromCaul'
  - '/minecraft:scoreboard players reset $playerData%$s.name% sstXP'
  
  # update players' playerdata name
  - '$Script$%PlayerData%$s.name=$player'
  
  # check if players' uuid.name is different then players' name
  - '$Script$%if%$s.uuid.$arg1.name!=$player'
  
  # set new name
  - '$Script$%Variable%$s.uuid.$arg1.name=$player'